<!doctype html>
<html lang="en">
<!--begin::Head-->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>{% block title %}IntellexIA | Dashboard{% endblock %}</title>
  <!--begin::Accessibility Meta Tags-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="color-scheme" content="light dark" />
  <meta name="theme-color" content="#007bff" media="(prefers-color-scheme: light)" />
  <meta name="theme-color" content="#1a1a1a" media="(prefers-color-scheme: dark)" />
  <!--end::Accessibility Meta Tags-->
  <!--begin::Primary Meta Tags-->
  <meta name="title" content="{% block meta_title %}IntellexIA | Dashboard{% endblock %}" />
  <meta name="author" content="ColorlibHQ" />
  <meta name="description"
    content="{% block meta_description %}AdminLTE is a Free Bootstrap 5 Admin Dashboard, 30 example pages using Vanilla JS. Fully accessible with WCAG 2.1 AA compliance.{% endblock %}" />
  <meta name="keywords"
    content="{% block meta_keywords %}bootstrap 5, bootstrap, bootstrap 5 admin dashboard, bootstrap 5 dashboard, bootstrap 5 charts, bootstrap 5 calendar, bootstrap 5 datepicker, bootstrap 5 tables, bootstrap 5 datatable, vanilla js datatable, colorlibhq, colorlibhq dashboard, colorlibhq admin dashboard, accessible admin panel, WCAG compliant{% endblock %}" />
  <!--end::Primary Meta Tags-->
  <!--begin::Accessibility Features-->
  <!-- Skip links will be dynamically added by accessibility.js -->
  <meta name="supported-color-schemes" content="light dark" />
  <link rel="preload" href="{{ url_for('static', filename='css/adminlte.css') }}" as="style" />
  <!--end::Accessibility Features-->
  <!--begin::Fonts-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/source-sans-3@5.0.12/index.css"
    integrity="sha256-tXJfXfp6Ewt1ilPzLDtQnJV4hclT9XuaZUKyUvmyr+Q=" crossorigin="anonymous" media="print"
    onload="this.media='all'" />
  <!--end::Fonts-->
  <!--begin::Third Party Plugin(OverlayScrollbars)-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.11.0/styles/overlayscrollbars.min.css"
    crossorigin="anonymous" />
  <!--end::Third Party Plugin(OverlayScrollbars)-->
  <!--begin::Third Party Plugin(Bootstrap Icons)-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
    crossorigin="anonymous" />
  <!--end::Third Party Plugin(Bootstrap Icons)-->
  <!--begin::Required Plugin(AdminLTE)-->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/adminlte.css') }}" />
  <!--end::Required Plugin(AdminLTE)-->
  <!-- apexcharts -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.css"
    integrity="sha256-4MX+61mt9NVvvuPjUWdUdyfZfxSB1/Rf9WtqRHgG5S0=" crossorigin="anonymous" />
  <!--end::apexcharts-->
  <!-- jQuery CDN -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script> <!--end::jQuery CDN-->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  {% block extra_css %}{% endblock %}
</head>

<body class="layout-fixed sidebar-expand-lg sidebar-open bg-body-tertiary sidebar-mini sidebar-collapse">
  <!--begin::App Wrapper-->
  <div class="app-wrapper">
    <!-- Header -->
    {% include 'partials/header.html' %}

    <!-- Sidebar -->
    {% include 'partials/sidebar.html' %}

    <!--begin::App Main-->
    <main class="app-main">
      <!--begin::App Content-->
      <div class="app-content">
        <!--begin::Container-->
        <div class="container-fluid">
          {% with messages = get_flashed_messages() %}
          {% if messages %}
          <div class="alert alert-info" role="alert">
            {% for message in messages %}
            <p>{{ message }}</p>
            {% endfor %}
          </div>
          {% endif %}
          {% endwith %}
          {% block content %}{% endblock %}
        </div>
        <!--end::Container-->
      </div>
      <!--end::App Content-->
    </main>
    <!--end::App Main-->

    <!-- Footer -->
    {% include 'partials/footer.html' %}
  </div>
  <!--end::App Wrapper-->

  <!--begin::Script-->
  <!--begin::Third Party Plugin(OverlayScrollbars)-->
  <script src="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.11.0/browser/overlayscrollbars.browser.es6.min.js"
    crossorigin="anonymous"></script>
  <!--end::Third Party Plugin(OverlayScrollbars)--><!--begin::Required Plugin(popperjs for Bootstrap 5)-->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    crossorigin="anonymous"></script>
  <!--end::Required Plugin(popperjs for Bootstrap 5)--><!--begin::Required Plugin(Bootstrap 5)-->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.min.js" crossorigin="anonymous"></script>
  <!--end::Required Plugin(Bootstrap 5)--><!--begin::Required Plugin(AdminLTE)-->
  <script src="{{ url_for('static', filename='js/adminlte.js') }}"></script>
  <!--end::Required Plugin(AdminLTE)--><!--begin::OverlayScrollbars Configure-->
  <script>
    const SELECTOR_SIDEBAR_WRAPPER = '.sidebar-wrapper';
    const Default = {
      scrollbarTheme: 'os-theme-light',
      scrollbarAutoHide: 'leave',
      scrollbarClickScroll: true,
    };
    document.addEventListener('DOMContentLoaded', function () {
      const sidebarWrapper = document.querySelector(SELECTOR_SIDEBAR_WRAPPER);
      if (sidebarWrapper && typeof OverlayScrollbarsGlobal?.OverlayScrollbars !== 'undefined') {
        OverlayScrollbarsGlobal.OverlayScrollbars(sidebarWrapper, Default);
      }
    });
  </script>
  <!--end::OverlayScrollbars Configure-->

  <!-- Sidebar Mini & Theme Toggle Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const html = document.documentElement;
      const body = document.body;
      const themeToggle = document.getElementById('theme-toggle');
      const icon = themeToggle.querySelector('i');

      // ===== SIDEBAR MINI STATE MANAGEMENT =====
      const savedSidebarState = localStorage.getItem('sidebarState') || 'mini';

      if (savedSidebarState === 'normal') {
        body.classList.remove('sidebar-mini', 'sidebar-collapse');
      } else {
        body.classList.add('sidebar-mini', 'sidebar-collapse');
      }

      // Listen for sidebar toggle events
      document.addEventListener('lte.sidebar', function (e) {
        const isMini = body.classList.contains('sidebar-collapse');
        localStorage.setItem('sidebarState', isMini ? 'normal' : 'mini');
      });

      // ===== THEME TOGGLE =====
      // Recuperar tema salvo do localStorage
      const savedTheme = localStorage.getItem('theme') || 'light';

      // Aplicar tema inicial
      if (savedTheme === 'dark') {
        html.setAttribute('data-bs-theme', 'dark');
        icon.classList.remove('bi-moon-stars');
        icon.classList.add('bi-sun');
      } else {
        html.setAttribute('data-bs-theme', 'light');
        icon.classList.remove('bi-sun');
        icon.classList.add('bi-moon-stars');
      }

      // Toggle tema ao clicar
      themeToggle.addEventListener('click', function (e) {
        e.preventDefault();
        const currentTheme = html.getAttribute('data-bs-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

        // Aplicar novo tema
        html.setAttribute('data-bs-theme', newTheme);
        localStorage.setItem('theme', newTheme);

        // Atualizar Ã­cone
        if (newTheme === 'dark') {
          icon.classList.remove('bi-moon-stars');
          icon.classList.add('bi-sun');
        } else {
          icon.classList.remove('bi-sun');
          icon.classList.add('bi-moon-stars');
        }
      });
    });
  </script>

  {% block extra_js %}{% endblock %}
</body>
<!--end::Body-->

</html>